<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tic tac toe</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="overlay">
        <div>
            <p class="winner-message"></p>
            <button type="button" role="button" class="restart">â†» Restart Game</button>
        </div>
    </div>

    <main>
        <div>
            <div class="game-container">
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
                <div class="grid-item"></div>
            </div>
            <p class="current-player">Current Player: <span id="current-player"></span></p>
        </div>
    </main>

    <script>
        let currentPlayer = "";
        const nought = "O";
        const cross = "X";
        const currentPlayerEle = document.querySelector("#current-player");
        const overlayEle = document.querySelector(".overlay");
        const winnerMsgEle = document.querySelector(".winner-message");
        const restartEle = document.querySelector(".restart");
        const GRID_ITEMS = document.querySelectorAll(".grid-item");
        const WINNING_COMBOS = [[0, 1, 2], [3, 4, 5], [6, 7, 8],
        [2, 5, 8], [1, 4, 7], [0, 3, 6],
        [0, 4, 8], [2, 4, 6]];

        function init() {
            currentPlayer = cross;
            _showCurrentPlayer();
        }

        function reset() {
            overlayEle.classList.toggle("game-over");
            winnerMsgEle.innerText = '';
            GRID_ITEMS.forEach((item) => {
                item.innerText = '';
            });

            init();
        }

        function _changeCurrentPlayer() {
            return currentPlayer = currentPlayer === cross ? nought : cross;
        }

        function _showCurrentPlayer() {
            currentPlayerEle.innerText = currentPlayer;
        }

        function _checkWin() {
            return WINNING_COMBOS.some(combo => {
                return combo.every(c => {
                    return GRID_ITEMS[c].innerText == currentPlayer;
                });
            });
        }

        function _checkDraw() {
            return [...GRID_ITEMS].every(item => {
                return item.innerText.includes(cross) || item.innerText.includes(nought);
            });
        }

        GRID_ITEMS.forEach((item) => {
            item.addEventListener("click", e => {
                if (e.currentTarget.innerText) return;
                e.currentTarget.innerText = currentPlayer;
                if (_checkDraw()) {
                    winnerMsgEle.innerText = `Draw the game!`;


                    overlayEle.classList.toggle("game-over");
                    return;
                }

                if (_checkWin()) {
                    winnerMsgEle.innerText = `${currentPlayer} + ${currentPlayer} Wins!`
                    overlayEle.classList.toggle("game-over");
                    return;
                }
                _changeCurrentPlayer();
                _showCurrentPlayer();
            });
        });

        restartEle.addEventListener("click", () => {
            reset();
        });

        init();

    </script>
</body>

</html>